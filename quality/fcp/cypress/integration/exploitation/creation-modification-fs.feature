#language: fr
@exploitation @creationModificationFS @ignoreLow
Fonctionnalité: Création Modification de FS
  # En tant qu'exploitant,
  # je veux pouvoir créer et modifier des FS
  # afin que les usagers puissent utiliser FC avec de nouveaux services

  @ci
  Scénario: Création d'un FS sans restriction de FI
    Etant donné que je navigue sur la page login d'exploitation
    Et que je me connecte à exploitation en tant que "exploitant"
    Et que je navigue vers la page gestion des fournisseurs de service
    Et que je clique sur le bouton de création de FS
    Et que la liste "idpFilterExclude" contient "Aucune restriction" dans le formulaire de création de FS
    Et que les cases à cocher des FI sont désactivées dans le formulaire de création de FS
    Et qu' aucun FI n'est coché dans le formulaire de modification de FS
    Et que j'utilise la configuration pour le fournisseur de service "sans restriction de FI"
    Et que j'entre les valeurs par défaut pour mon fournisseur de service
    Et que j'entre "bdd-sp-without-restrictions" dans le champ "name" du formulaire de création de FS
    Quand je valide le formulaire de création de FS
    Alors le message de confirmation de création de FS est affiché
    Et je clique sur le bouton de modification du FS "bdd-sp-without-restrictions"
    Et la liste "idpFilterExclude" contient "Blacklist" dans le formulaire de modification de FS
    Et les cases à cocher des FI sont activées dans le formulaire de modification de FS
    Et aucun FI n'est coché dans le formulaire de modification de FS

  Scénario: Création d'un FS avec whitelist de FI
    Etant donné que je navigue sur la page login d'exploitation
    Et que je me connecte à exploitation en tant que "exploitant"
    Et que je navigue vers la page gestion des fournisseurs de service
    Et que je clique sur le bouton de création de FS
    Et que j'utilise la configuration pour le fournisseur de service "avec 2 FI whitelistés"
    Et que j'entre les valeurs par défaut pour mon fournisseur de service
    Et que j'entre "bdd-sp-with-whitelist" dans le champ "name" du formulaire de création de FS
    Quand je valide le formulaire de création de FS
    Alors le message de confirmation de création de FS est affiché
    Et je clique sur le bouton de modification du FS "bdd-sp-with-whitelist"
    Et la liste "idpFilterExclude" contient "Whitelist" dans le formulaire de modification de FS
    Et les FI listés dans la configuration du FS "avec 2 FI whitelistés" sont cochés dans le formulaire de modification de FS

  Scénario: Création d'un FS avec whitelist vide
    Etant donné que je navigue sur la page login d'exploitation
    Et que je me connecte à exploitation en tant que "exploitant"
    Et que je navigue vers la page gestion des fournisseurs de service
    Et que je clique sur le bouton de création de FS
    Et que j'utilise la configuration pour le fournisseur de service "sans restriction de FI"
    Et que j'entre les valeurs par défaut pour mon fournisseur de service
    Et que j'entre "Whitelist" dans le champ "idpFilterExclude" du formulaire de création de FS
    Et que j'entre "bdd-sp-with-empty-whitelist" dans le champ "name" du formulaire de création de FS
    Quand je valide le formulaire de création de FS
    Alors le message de confirmation de création de FS est affiché
    Et je clique sur le bouton de modification du FS "bdd-sp-with-empty-whitelist"
    Et la liste "idpFilterExclude" contient "Whitelist" dans le formulaire de modification de FS
    Et aucun FI n'est coché dans le formulaire de modification de FS

  @ci
  Scénario: Création d'un FS avec blacklist de FI
    Etant donné que je navigue sur la page login d'exploitation
    Et que je me connecte à exploitation en tant que "exploitant"
    Et que je navigue vers la page gestion des fournisseurs de service
    Et que je clique sur le bouton de création de FS
    Et que j'utilise la configuration pour le fournisseur de service "avec 2 FI blacklistés"
    Et que j'entre les valeurs par défaut pour mon fournisseur de service
    Et que j'entre "bdd-sp-with-blacklist" dans le champ "name" du formulaire de création de FS
    Quand je valide le formulaire de création de FS
    Alors le message de confirmation de création de FS est affiché
    Et je clique sur le bouton de modification du FS "bdd-sp-with-blacklist"
    Et la liste "idpFilterExclude" contient "Blacklist" dans le formulaire de modification de FS
    Et les FI listés dans la configuration du FS "avec 2 FI blacklistés" sont cochés dans le formulaire de modification de FS

  Scénario: Création d'un FS avec blacklist vide
    Etant donné que je navigue sur la page login d'exploitation
    Et que je me connecte à exploitation en tant que "exploitant"
    Et que je navigue vers la page gestion des fournisseurs de service
    Et que je clique sur le bouton de création de FS
    Et que j'utilise la configuration pour le fournisseur de service "sans restriction de FI"
    Et que j'entre les valeurs par défaut pour mon fournisseur de service
    Et que j'entre "Blacklist" dans le champ "idpFilterExclude" du formulaire de création de FS
    Et que j'entre "bdd-sp-with-empty-blacklist" dans le champ "name" du formulaire de création de FS
    Quand je valide le formulaire de création de FS
    Alors le message de confirmation de création de FS est affiché
    Et je clique sur le bouton de modification du FS "bdd-sp-with-empty-blacklist"
    Et la liste "idpFilterExclude" contient "Blacklist" dans le formulaire de modification de FS
    Et aucun FI n'est coché dans le formulaire de modification de FS

  @ci
  Scénario: Modification d'un FS sans restriction de FI
    Etant donné que je navigue sur la page login d'exploitation
    Et que je me connecte à exploitation en tant que "exploitant"
    Et que je navigue vers la page gestion des fournisseurs de service
    Et que je clique sur le bouton de modification du FS "bdd-sp-without-restrictions"
    Et que la liste "idpFilterExclude" contient "Blacklist" dans le formulaire de modification de FS
    Et que les cases à cocher des FI sont activées dans le formulaire de modification de FS
    Et qu' aucun FI n'est coché dans le formulaire de modification de FS
    Quand je coche les FI de la configuration "avec 2 FI blacklistés" de mon fournisseur de service
    Et j'entre "bdd-sp-add-restrictions" dans le champ "name" du formulaire de création de FS
    Et je valide le formulaire de modification de FS
    Alors le message de confirmation de modification du FS "bdd-sp-add-restrictions" est affiché
    Et je rafraîchis la page
    Et la liste "idpFilterExclude" contient "Blacklist" dans le formulaire de modification de FS
    Et les FI listés dans la configuration du FS "avec 2 FI blacklistés" sont cochés dans le formulaire de modification de FS

  Scénario: Modification d'un FS avec whitelist de FI
    Etant donné que je navigue sur la page login d'exploitation
    Et que je me connecte à exploitation en tant que "exploitant"
    Et que je navigue vers la page gestion des fournisseurs de service
    Et que je clique sur le bouton de modification du FS "bdd-sp-with-whitelist"
    Et que la liste "idpFilterExclude" contient "Whitelist" dans le formulaire de modification de FS
    Et que les FI listés dans la configuration du FS "avec 2 FI whitelistés" sont cochés dans le formulaire de modification de FS
    Quand j'entre "Blacklist" dans le champ "idpFilterExclude" du formulaire de modification de FS
    Et les FI listés dans la configuration du FS "avec 2 FI whitelistés" sont cochés dans le formulaire de modification de FS
    Et je coche les FI de la configuration "avec 2 FI blacklistés" de mon fournisseur de service
    Et j'entre "bdd-sp-from-whitelist-to-blacklist" dans le champ "name" du formulaire de création de FS
    Et je valide le formulaire de modification de FS
    Alors le message de confirmation de modification du FS "bdd-sp-from-whitelist-to-blacklist" est affiché
    Et je rafraîchis la page
    Et la liste "idpFilterExclude" contient "Blacklist" dans le formulaire de modification de FS
    Et les FI listés dans la configuration du FS "avec 2 FI blacklistés" sont cochés dans le formulaire de modification de FS

  Scénario: Modification d'un FS avec whitelist vide vers sans restriction
    Etant donné que je navigue sur la page login d'exploitation
    Et que je me connecte à exploitation en tant que "exploitant"
    Et que je navigue vers la page gestion des fournisseurs de service
    Et que je clique sur le bouton de modification du FS "bdd-sp-with-empty-whitelist"
    Et que la liste "idpFilterExclude" contient "Whitelist" dans le formulaire de modification de FS
    Et qu' aucun FI n'est coché dans le formulaire de modification de FS
    Et que les cases à cocher des FI sont activées dans le formulaire de modification de FS
    Et que je coche les FI de la configuration "avec 2 FI whitelistés" de mon fournisseur de service
    Et que les FI listés dans la configuration du FS "avec 2 FI whitelistés" sont cochés dans le formulaire de modification de FS
    Quand j'entre "Aucune restriction" dans le champ "idpFilterExclude" du formulaire de modification de FS
    Et aucun FI n'est coché dans le formulaire de modification de FS
    Et les cases à cocher des FI sont désactivées dans le formulaire de modification de FS
    Et j'entre "bdd-sp-from-whitelist-to-no-restrictions" dans le champ "name" du formulaire de modification de FS
    Et je valide le formulaire de modification de FS
    Alors le message de confirmation de modification du FS "bdd-sp-from-whitelist-to-no-restrictions" est affiché
    Et je rafraîchis la page
    Et la liste "idpFilterExclude" contient "Blacklist" dans le formulaire de modification de FS
    Et aucun FI n'est coché dans le formulaire de modification de FS
    Et les cases à cocher des FI sont activées dans le formulaire de modification de FS

  @ci
  Scénario: Modification d'un FS avec blacklist de FI
    Etant donné que je navigue sur la page login d'exploitation
    Et que je me connecte à exploitation en tant que "exploitant"
    Et que je navigue vers la page gestion des fournisseurs de service
    Et je clique sur le bouton de modification du FS "bdd-sp-with-blacklist"
    Et la liste "idpFilterExclude" contient "Blacklist" dans le formulaire de modification de FS
    Et les FI listés dans la configuration du FS "avec 2 FI blacklistés" sont cochés dans le formulaire de modification de FS
    Quand j'entre "Whitelist" dans le champ "idpFilterExclude" du formulaire de modification de FS
    Et les FI listés dans la configuration du FS "avec 2 FI blacklistés" sont cochés dans le formulaire de modification de FS
    Et je coche les FI de la configuration "avec 2 FI whitelistés" de mon fournisseur de service
    Et j'entre "bdd-sp-from-blacklist-to-whitelist" dans le champ "name" du formulaire de création de FS
    Et je valide le formulaire de modification de FS
    Alors le message de confirmation de modification du FS "bdd-sp-from-blacklist-to-whitelist" est affiché
    Et je rafraîchis la page
    Et la liste "idpFilterExclude" contient "Whitelist" dans le formulaire de modification de FS
    Et les FI listés dans la configuration du FS "avec 2 FI whitelistés" sont cochés dans le formulaire de modification de FS

  @ci
  Scénario: Suppression des FS commençant par "bdd-sp-"
    Etant donné que je navigue sur la page login d'exploitation
    Et je me connecte à exploitation en tant que "exploitant"
    Et je navigue vers la page gestion des fournisseurs de service
    Quand je supprime les fournisseurs de service commençant par "bdd-sp-"
